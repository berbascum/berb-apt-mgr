# Another bash script to manage an apt repo
Simple bash script to manage a configurable multiarch and multirelease apt repository

### Fetures
* Multi-arch
* Multi-suite
* Multi-components (2.1.0.1)
* APT repo directory tree creation (--mkdirs flag)
* Config files for apt-ftparchive creation (--createconf flag)
* Metadata creation for each arch, suite and component
* Release and InRelease signing
* Automatic gpg public key export (--rebuild flag)
* Minimal sources list creation (--rebuild tag)

## Installation from apt repo (recomended way)
* It's the recomended way since some depends relies on the debian package management.

* Visit [Berbascum's apt repo url](https://github.com/berbascum/berb-apt-git-repo) to add the apt repo

* Install the pachage from apt
```
sudo apt-get install berb-apt-mgr
```

## Usage
* The gpg key to use should be previously installed on the user's gnupg dir

* The KEYID should be in repo_path/key-ids.conf in this format:
```
gpg_key_id="<key_id>"
```

* bam local config file
```
repo_path/berb-apt-mgr.conf
```

* aptftp config: is autogenerated with "--createconf"

* Use "--rebuild" flag after:
  - Using --mkdirs and --createconfig flags
  - Adding new packages to any pool


* Script tags:

  --mkdirs:     Creates the repo dir structure, based on the suites, components and archs configured in the berb-apt-mgr.conf file

  --rebuild:    Rebuilds the repository metadata

  --createconf: Generates the aptftp.conf and aptgenerate.conf files from templates using the suites, components and archs configured in the berb-apt-mgr.conf file
